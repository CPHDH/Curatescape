/*
 * jQuery mmenu dropdown add-on
 * mmenu.frebsite.nl
 *
 * Copyright (c) Fred Heusschen
 */
!function(t){var o="mmenu",i="dropdown";t[o].addons[i]={setup:function(){if(this.opts.offCanvas){var f=this,p=this.opts[i],r=this.conf[i];if(a=t[o].glbl,"boolean"==typeof p&&p&&(p={drop:p}),"object"!=typeof p&&(p={}),"string"==typeof p.position&&(p.position={of:p.position}),p=this.opts[i]=t.extend(!0,{},t[o].defaults[i],p),p.drop){var l;this.bind("initMenu:after",function(){if(this.$menu.addClass(e.dropdown),p.tip&&this.$menu.addClass(e.tip),"string"!=typeof p.position.of){var o=this._getOriginalMenuId();o&&o.length&&(p.position.of='[href="#'+o+'"]')}"string"==typeof p.position.of&&(l=t(p.position.of),p.event=p.event.split(" "),1==p.event.length&&(p.event[1]=p.event[0]),"hover"==p.event[0]&&l.on(s.mouseenter+"-"+i,function(){f.open()}),"hover"==p.event[1]&&this.$menu.on(s.mouseleave+"-"+i,function(){f.close()}))}),this.bind("open:start",function(){this.$menu.data(n.style,this.$menu.attr("style")||""),a.$html.addClass(e.dropdown)}),this.bind("close:finish",function(){this.$menu.attr("style",this.$menu.data(n.style)),a.$html.removeClass(e.dropdown)});var h=function(t,o){var i=o[0],n=o[1],s="x"==t?"scrollLeft":"scrollTop",f="x"==t?"outerWidth":"outerHeight",h="x"==t?"left":"top",d="x"==t?"right":"bottom",u="x"==t?"width":"height",c="x"==t?"maxWidth":"maxHeight",m=null,v=a.$wndw[s](),b=l.offset()[h]-=v,x=b+l[f](),g=a.$wndw[u](),w=r.offset.button[t]+r.offset.viewport[t];if(p.position[t])switch(p.position[t]){case"left":case"bottom":m="after";break;case"right":case"top":m="before"}null===m&&(m=b+(x-b)/2<g/2?"after":"before");var $,y;return"after"==m?($="x"==t?b:x,y=g-($+w),i[h]=$+r.offset.button[t],i[d]="auto",n.push(e["x"==t?"tipleft":"tiptop"])):($="x"==t?x:b,y=$-w,i[d]="calc( 100% - "+($-r.offset.button[t])+"px )",i[h]="auto",n.push(e["x"==t?"tipright":"tipbottom"])),i[c]=Math.min(r[u].max,y),[i,n]},d=function(t){if(this.vars.opened){this.$menu.attr("style",this.$menu.data(n.style));var o=[{},[]];o=h.call(this,"y",o),o=h.call(this,"x",o),this.$menu.css(o[0]),p.tip&&this.$menu.removeClass(e.tipleft+" "+e.tipright+" "+e.tiptop+" "+e.tipbottom).addClass(o[1].join(" "))}};this.bind("open:start",d),a.$wndw.on(s.resize+"-"+i,function(t){d.call(f)}),this.opts.offCanvas.blockUI||a.$wndw.on(s.scroll+"-"+i,function(t){d.call(f)})}}},add:function(){e=t[o]._c,n=t[o]._d,s=t[o]._e,e.add("dropdown tip tipleft tipright tiptop tipbottom"),s.add("mouseenter mouseleave resize scroll")},clickAnchor:function(t,o){}},t[o].defaults[i]={drop:!1,event:"click",position:{},tip:!0},t[o].configuration[i]={offset:{button:{x:-10,y:10},viewport:{x:20,y:20}},height:{max:880},width:{max:440}};var e,n,s,a}(jQuery);